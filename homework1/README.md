# Завдання №1. Python для Data Engineering

## Послідовність виконання завдання


**Написати джобу, яка витягує всі дані продаж з API та зберігає їх в raw директорію:**

➡️API доступна за адресою: https://fake-api-vycpfa6oca-uc.a.run.app/

  1. Секретний токен до API: *token string (hidden)*
  2. Секретний токен в жодному разі не можна зберігати в коді, він обовʼязково має зберігатися у змінній середовища з назвою AUTH_TOKEN
  4. У файлі main.py має бути реалізований WEB сервер за допомогою фреймворка Flask, який працює локально і приймає команди у вигляді POST запитів на порт 8081
  5. Сервер має приймати JSON обʼєкт наступного вигляду:
  ```
  json={
            "date": "2022-08-09",
            "raw_dir": RAW_DIR
        }
```
  6. Шлях зберігання має мати вигляд: /path/to/my_dir/raw/sales/2022-08-09. Цей шлях має подаватися у вигляді параметру raw_dir для джоби
  7. Джоба обовʼязково має бути ідемпотентною. Для цього джоба сама має очищати вміст директорії raw_dir перед записом нових файлів
  8. Кожну “сторінку” з API можна зберігати в окремому файлі, або всі сторінки в одному великому JSON. Файл має мати імʼя sales_2022-08-09.json або sales_2022-08-09_1.json, sales_2022-08-09_2.json і т.д., якщо файлів декілька

**Написати джобу, яка JSON файли з raw директорії записує в stg директорію в форматі Avro. Всі умови залишаються з попередньої джоби, окрім:**
  1. Джоба має запускатись POST запитом на localhost:8082 з 2 параметрами в JSON: raw_dir та stg_dir
  2. stg_dir має мати вигляд: /path/to/my_dir/stg/sales/2022-08-09
  3. raw_dir має мати такий же вигляд, як і для першої джоби
  4. В якості шаблону для коду можна модифікувати код з першої джоби
  5. Має бути використана бібліотека fastavro
2. Самостійно перевірити, чи обидві джоби працюють коректно, можна наступним чином:
  1. Запустити Flask сервер першої джоби в одному терміналі, а другої джоби в іншому. Зверніть увагу, що сервери обох джоб мають працювати на різних портах
  2. Запустити скрипт для перевірки: *bin/check_jobs.py*
  3. Якщо скрипт не впав, а відпрацював коректно, це свідчить, що код не має синтаксичних помилок
  4. Перевірити правильність обох джоб можна, переглянувши файли в raw та stg директоріях
  